rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Users can access their own document
    // TODO: Lock down with proper Firebase Auth (request.auth.uid == uid)
    match /users/{uid} {
      allow read, write: if true;

      match /links/{linkId} {
        allow read, write: if true;
      }
    }

    // pending_processing: only Cloud Functions (admin SDK)
    match /pending_processing/{docId} {
      allow read, write: if false;
    }

    // task_logs: only Cloud Functions (admin SDK)
    match /task_logs/{docId} {
      allow read, write: if false;
    }
  }
}
